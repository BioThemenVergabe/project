function calcSum(){var a=0;return $("[data-target=range]").each(function(){a+=parseInt($(this).html())}),$("#sum").html(a),a}function getHidden(a){var t=null;return $("input[type=hidden]").each(function(){$(this).attr("name")==a&&(t=$(this))}),t}function getCookie(a){for(var t=a+"=",e=document.cookie.split(";"),s=0;s<e.length;s++){for(var r=e[s];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function checkWahlValues(a,t){for(var e=a.length,s=0,r=0;r<e-1;r++)s+=10-r;return $("#minRating").html(s),!(parseInt(t)<parseInt(s))}$(function(){if(setInterval(function(){}),""!=sessionStorage.getItem("modal")){var a=sessionStorage.getItem("modal");$("#"+a).modal(),sessionStorage.removeItem("modal"),$('form:not([name="'+a+'"])').find(".has-error").removeClass("has-error")}1!=getCookie("cookieAccepted")&&$("#cookieMessage.modal").modal({keyboard:!1,backdrop:"static"}),$(".copyOf").on("input change",function(){parseInt($(this).val())>$(this).attr("max")&&$(this).val(parseInt($(this).attr("max")));var a=$(this).parents("tr").data("row");$("#"+a).val(parseInt($(this).val())),$("tr[data-row="+a+"]").find("[data-target=range]").html($(this).val()),$("[data-row-copy="+a+"]").find("input[data-copy]").val(parseInt($(this).val())),calcSum()}),$("a[data-action]").on("click",function(a){a.preventDefault(),$("#"+$(this).data("action")).modal()}),$("[type=reset]").click(function(a){$(this).closest("form").get(0).reset();var t=0;$("[data-target=range]").each(function(){$(this).html(function(){return $(this).parents("tr").find("input[type=range]").val()}),$(this).parents("tr").find("input.copyOf").val(parseInt($(this).html())),t+=parseInt($(this).html()),$("#sum").html(t)})}),calcSum(),$(".copyOf").attr("value",function(){return $("#"+$(this).parents("tr").data("row")).val()}),$('[data-toggle="popover"]').popover(),$(".dropdown-toggle").dropdown(),$("#logo").on("click",function(){window.location.href=$(location).attr("protocol")+"//"+$(location).attr("hostname")+":"+$(location).attr("port")+"/redirect"}),$("#accept[data-dismiss]").on("click",function(){var a=new Date;a.setTime(a.getTime()+31536e6);var t="expires="+a.toUTCString();document.cookie="cookieAccepted=1;"+t+";path=/"}),$("form[name=wahl] input[type=submit]").on("click",function(a){var t=$(".ag-values");val=new Array,$.each(t,function(a){val.push(t[a].value),t[a].value=parseInt(t[a].value),alert(t[a].value)}),val.sort(function(a,t){return a-t}),val.reverse(),checkWahlValues(val,calcSum())||(a.preventDefault(),$("#errorMsg").modal())}),$("input:required").on("input change",function(){""!=$(this).val()?($(this).parent().removeClass("has-error"),$(this).parent().addClass("has-success")):($(this).parent().removeClass("has-success"),$(this).parent().addClass("has-error"))}),$("form[name] input[type=submit]").on("click",function(a){a.preventDefault(),sessionStorage.setItem("modal",$(this).parents("form").attr("name")),$(this).parents("form").submit()}),$('form[name=register] [type="password"][name*="password"]').on("keyup",function(){var a;switch($(this).attr("name")){case"password":a=$(this).parents("form").find("input[name=password_confirmation]");break;case"password_confirmation":a=$(this).parents("form").find("input[name=password]")}a.val()!=$(this).val()?($(".has-success").removeClass("has-success"),a.parent().addClass("has-error"),$(this).parent().addClass("has-error")):($(".has-error").removeClass("has-error"),a.parent().addClass("has-success"),$(this).parent().addClass("has-success"))}),$('form[name=edit] [type="password"][name*="password"]').on("change",function(){var a;switch($(this).attr("name")){case"password":a=$(this).parents("form").find("input[name=password_confirmation]");break;case"password_confirmation":a=$(this).parents("form").find("input[name=password]")}a.val()!=$(this).val()||$(this).val().length<8?($(".has-success").removeClass("has-success"),a.parent().addClass("has-error"),$(this).parent().addClass("has-error")):($(".has-error").removeClass("has-error"),a.parent().addClass("has-success"),$(this).parent().addClass("has-success"))}),$("form[name=edit] [type=submit]").on("click",function(a){a.preventDefault()}),$("#mailContact").find("input[type=submit]").on("click",function(a){a.preventDefault();var t=$(this).closest("form");t.find(".help-block").remove();var e=t.clone(!0),s=t.find("input"),r={message:t.find("textarea").val()};$("form").not("[data-name="+t.attr("data-name")+"]").find(".has-error").html("Hallo"),s.each(function(){r[$(this).attr("name")]=$(this).val()}),$.ajax({type:t.attr("method"),url:t.attr("action"),data:r,beforeSend:function(a){t.find(".modal-body").html('<div class="row"><div class="col-xs-4 col-xs-offset-4"><div class="progress"><div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%"></div></div></div></div>')},success:function(a){if($(".has-error").removeClass("has-error"),$(".help-block").remove(),1==a.success){var s='<div class="bs-callout bs-info"><h4>'+getHidden("mailSuccess").val()+"</h4></div>";t.find(".modal-body").html(s),t.find("input[type=submit]").addClass("hidden"),t.find("input[type=button]").removeClass("hidden"),$btn=t.find("input[type=button]"),$btn.on("click",function(){$(this).closest(".modal").modal("toggle"),setTimeout(function(){t.replaceWith(e),t.find("input[type=submit]").removeClass("hidden"),t.find("input[type=button]").addClass("hidden")},1e3)})}else 0==a.success&&(t.html(e),$.each(a.errors,function(){var a=t.find("[name="+this.split(" ")[0]+"]");a.parents(".form-group").addClass("has-error"),a.parent().append('<span class="help-block"><strong>'+this+"</strong></span>")}))}})})});