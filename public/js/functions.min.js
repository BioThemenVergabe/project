"use strict";function toggle(){var t=$("[name=_token]").serialize();$("#status_field").load("/admin_toggleOpened1",t),$("#close_open_button").load("/admin_toggleOpened2",t)}function deleteStudentTrigger(){var t=$(triggerStudent).parent().parent().parent(),e=$(t).find(".id").html();window.location="/studenten_delete?id="+e}function validateRating(){var t=!0;if($("input.rating").each(function(){($(this).val()<1||$(this).val()>10||$(this).val()%1!=0)&&(t=!1,errorInput.push($(this)),$(this).css({border:"#FF0000 1px solid"}))}),!0===t){$("#AG_Wahl_Modal").modal("hide"),$(".modal-backdrop").remove(),$("#Rating_form").submit(),$("#speicherModal2").modal("toggle");for(var e=0;e<errorInput.length;e++)$(errorInput[e]).css({border:"1px solid #ccc"})}else alert("Hey Admin, nicht vergessen, die Noten müssen Ganzzahlen zwischen 1 und 10 sein ;)")}function resetRating(){var t=$("input[name='id']")[0].value;$("#AG_Wahl_Modal_row").load("admin_get_ratings?user="+t)}function anhaengen(){$("#AG_table tr:last").after('<tr><td style="display:none"><input name="id[]" class="id" form="AG_form"></td><td><input name ="name[]" class="gn form-control" form="AG_form"></td><td><input name ="groupLeader[]" class="gl form-control" form="AG_form"></td><td><input name="spots[]" class="pl form-control" type="number" form="AG_form"></td><td><input name="date[]" class="zp form-control" form="AG_form"></td><td><button type="button" class="löschButton btn btn-default btn-xs form-control" data-toggle="modal" data-target="#löschModal"><span class="icon icon-minus"></span></button></td></tr>'),$(".löschButton").click(function(){trigger=this})}function update(){$("#AG_anz").html($("#AG_table tr").length-1);var t=0;$("input.pl").each(function(){t+=parseInt($(this).val())}),$("#spots_anzahl").html(t),$(".löschButton").click(function(){trigger=this})}function deleteTrigger(){var t=$(trigger).parent().parent(),e=t.find("input.id").val();""!==e?$("#AG_table").load("admin_AG_delete?id="+e,function(t,e,n){"error"==e?alert("Hey Admin, diese AG wurde einem der Studenten zugewiesen und kann daher nicht gelöscht werden. \nDu kannst auf dem Dashboard jedoch alle zugewiesenen AGs löschen, die AG dann löschen und die Zuweisung erneut laufen lassen!"):update()}):$(t).remove()}function checkSave(){var t=!0,e=!0,n=[];$("input.gl").each(function(){""==$(this).val()&&(t=!1)}),$("input.gn").each(function(){""==$(this).val()&&(t=!1);for(var a=0;a<n.length;a++)$(this).val()===n[a]&&(e=!1,t=!1);n.push($(this).val())}),$("input.pl").each(function(){""==$(this).val()&&(t=!1)}),1==t?($("#ag_alert").hide(),$("#ag_alert2").hide(),$("#AG_form").submit(),$("#speicherModal").modal("toggle"),update()):0==e?$("#ag_alert2").show():$("#ag_alert").show()}var triggerStudent,errorInput=[],trigger;$(document).ready(function(){$("#end_election").submit(function(t){t.preventDefault(),$.ajax({type:"POST",url:"/admin_end_election",data:$("#end_election").serialize(),success:function(t){"true"==t?window.location="/admin?action=ended":alert("Hey Admin. Das eingegebene Passwort war nicht korrekt.")}})}),$("#del_Ratings").submit(function(t){t.preventDefault(),$.ajax({type:"POST",url:"/admin_delete_ratings",data:$("#del_Ratings").serialize(),success:function(t){"true"==t?window.location="/admin?action=deleted":alert("Hey Admin. Das eingegebene Passwort war nicht korrekt.")}})}),$("#del_Assigned").submit(function(t){t.preventDefault(),$.ajax({type:"POST",url:"/admin_delete_assignments",data:$("#del_Assigned").serialize(),success:function(t){"true"==t?window.location="/admin?action=deletedAssignments":alert("Hey Admin. Das eingegebene Passwort war nicht korrekt.")}})}),$("#change_welcome").click(function(){var t=$("[name=_token]"),e="de";$("span.lang").hasClass("lang-en")&&(e="en");var n={_token:t[0].value,lang:e,text:$("#begruessung").val()};$.ajax({type:"POST",url:"/admin_welcome_save",data:n})}),$("#Ergebnisse_download").click(function(){window.location="/admin_download_results"}),$("#noRatings").length&&$("#start_Algo").addClass("disabled"),$("#Ergebnisse_download_disabled").click(function(t){$("#dashboard_alert2").show()}),$("#start_Algo").click(function(){document.getElementById("start_Algo").classList.contains("disabled")?$("#dashboard_alert").show():($("#startAlgoModal").modal("toggle"),$.ajax({type:"POST",url:"/admin_start_algo",data:$("[name=_token]").serialize(),success:function(t){"true"==t?window.location="/admin?action=algoSucces":alert("Error:"+t)}}))}),$("#close_alert").click(function(){$("#dashboard_alert").hide()}),$("#close_alert2").click(function(){$("#dashboard_alert2").hide()}),$(".löschStudentButton").click(function(){triggerStudent=this}),$("#löschStudentModal").on("show.bs.modal",function(){var t=$(triggerStudent).parent().parent().parent(),e=t.find("td.id").html(),n=t.find("td.ma").html(),a=t.find("td.na").html(),i=t.find("td.za").html();$("#insert-student .id").html(e),$("#insert-student .ma").html(n),$("#insert-student .na").html(a),$("#insert-student .za").html(i)}),$("#Stud_search_button").click(function(){var t=encodeURI($("#Stud_search_query").val());$("#Stud_table").load("admin_studenten_search?q="+t,function(){$("#Stud_Anzahl").html($("#Stud_table tr").length-1),$(".löschStudentButton").click(function(){triggerStudent=this}),$(".bearbeitenButton").click(function(){var t=$(this).parent().parent().parent(),e=$(t).find(".id").html();window.location="/admin_studenten_bearbeiten?id="+e}),$("#Stud_table tr").length>3&&$("#Stud_table tr").length<9?$("section.container:first").css("padding-bottom","10em"):$("#Stud_table tr").length<=3?$("section.container:first").css("padding-bottom","20em"):$("section.container:first").css("padding-bottom","0em")})}),$("#Stud_search_query").keyup(function(t){13==t.keyCode&&$("#Stud_search_button").click()}),$(".bearbeitenButton").click(function(){var t=$(this).parent().parent().parent(),e=$(t).find(".id").html();window.location="/admin_studenten_bearbeiten?id="+e}),$("#sb_form").submit(function(t){t.preventDefault(),$.post("/admin_studenten",$("#sb_form").serialize(),function(t){"true"===t?window.location="/admin_studenten":"matrnr"==t.error?(alert("Der Student "+t.name+" besitzt diese Matrikelnummer bereits. Eine Matrikelnummer muss eindeutig sein. Deine Eingabe wurde Rückgängig gemacht!"),$("#sb_form")[0].reset()):"email"==t.error&&(alert("Der Student "+t.name+" besitzt diese Email Adresse bereits. Eine Email Adresse muss eindeutig sein. Deine Eingabe wurde Rückgängig gemacht!"),$("#sb_form")[0].reset())})}),$("#Rating_form").submit(function(t){t.preventDefault(),$.ajax({type:"POST",url:"/admin_sb_save",data:$("#Rating_form").serialize(),success:function(t){$("#rDurchschnitt").html(parseFloat(t))}})}),$("#AG_form").submit(function(t){t.preventDefault(),$.ajax({type:"POST",url:"/admin_AG_save",data:$("#AG_form").serialize(),success:function(t){var e=JSON.parse(t).IDs;$.each(e,function(){var t=this.name,e=this.id;$("tbody>tr").each(function(){var n=$(this);$(n).find(".gn").val()===t&&$(n).find(".id").val(e)})})}})}),$(".löschButton").click(function(){trigger=this}),$("#löschModal").on("show.bs.modal",function(){var t=$(trigger).parent().parent(),e=t.find("input.id").val(),n=t.find("input.gl").val(),a=t.find("input.gn").val(),i=t.find("input.pl").val(),r=t.find("input.zp").val();$("#insert-ag .id").html(e),$("#insert-ag .gl").html(n),$("#insert-ag .gn").html(a),$("#insert-ag .pl").html(i),$("#insert-ag .zp").html(r)}),$("#AG_search_button").click(function(){var t=encodeURI($("#AG_search_query").val());$("#AG_table").load("admin_AG_search?q="+t,function(){update(),1==$("#AG_table tr").length?$("section.container:first").css("padding-bottom","15em"):$("#AG_table tr").length<=3?$("section.container:first").css("padding-bottom","10em"):$("section.container:first").css("padding-bottom","0em")})}),$("#AG_search_query").keyup(function(t){13==t.keyCode&&$("#AG_search_button").click()}),$("#close_AG_alert").click(function(){$("#ag_alert").hide()}),$("#close_AG_alert2").click(function(){$("#ag_alert2").hide()})});